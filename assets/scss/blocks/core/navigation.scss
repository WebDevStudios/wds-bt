@import '../../abstracts/responsive-mixins';

/* -- Navigation -- */

.wp-block-navigation {

	.wp-block-navigation-item {
		padding: 0.5rem 0.625rem;

		.wp-block-navigation-item__content {
			cursor: pointer;
			padding: 0;
			position: relative;
			text-decoration: none;
			text-overflow: ellipsis;
			text-wrap: nowrap;
			transition: all 0.2s ease-in-out;

			&::before {
				content: '';
				left: 50%;
				transition: all 0.3s ease;
				width: 0%;
			}

			&::after {
				content: '';
				left: 50%;
				transition: all 0.3s ease;
				width: 0;
			}

			&:hover::before {
				background: var(--wp--preset--color--black);
				bottom: 0;
				content: '';
				height: 3px;
				left: 0;
				position: absolute;
				width: 50%;
			}

			&:hover::after {
				background: var(--wp--preset--color--black);
				bottom: 0;
				content: '';
				height: 3px;
				left: 50%;
				position: absolute;
				width: 50%;
			}

			&:hover,
			&:active,
			&[aria-current='page'] {
				-webkit-text-stroke: 0.5px var(--wp--preset--color--black);
				outline: none;
			}

			&[aria-current='page'] {
				-webkit-text-stroke: 0.5px var(--wp--preset--color--black);

				&:hover,
				&:active {
					-webkit-text-stroke: unset;
				}

				&::before {
					background: var(--wp--preset--color--black);
					bottom: 0;
					content: '';
					height: 3px;
					left: 0;
					position: absolute;
					width: 50%;
				}

				&::after {
					background: var(--wp--preset--color--black);
					bottom: 0;
					content: '';
					height: 3px;
					left: 50%;
					position: absolute;
					width: 50%;
				}

				&:hover::before {
					content: '';
					left: 50%;
					transition: all 0.3s ease;
					width: 0%;
				}

				&:hover::after {
					content: '';
					left: 50%;
					transition: all 0.3s ease;
					width: 0;
				}
			}

			&:focus {
				outline: auto;
			}
		}

		&.has-child {
			.wp-block-navigation__submenu-container {
				border: none;
				box-shadow:
					0 16px 24px 0 rgba(48, 49, 51, 0.09),
					0 0 1px 0 rgba(48, 49, 51, 0.05);
				padding: 0.3125rem;

				> .wp-block-navigation-item {
					display: block;
					border: none;
					padding: 0;
					width: 100%;

					> .wp-block-navigation-item__content {
						display: block;
						flex-grow: unset;
						gap: 0;
						padding: 0.3125rem 0.625rem;
						width: 100%;

						&:hover,
						&:active {
							.wp-block-navigation-item__label {
								color: var(--wp--preset--color--white);
								position: relative;
								z-index: 1;
							}
						}

						&::before {
							content: '';
							left: 50%;
							transition: all 0.3s ease;
							width: 0;
						}

						&::after {
							content: '';
							left: 50%;
							transition: all 0.3s ease;
							width: 0;
						}

						&:hover::before {
							background: var(--wp--preset--color--black);
							bottom: 0;
							content: '';
							height: 100%;
							left: 0;
							position: absolute;
							width: 50%;
						}

						&:hover::after {
							background: var(--wp--preset--color--black);
							bottom: 0;
							content: '';
							height: 100%;
							left: 50%;
							position: absolute;
							width: 50%;
						}
					}
				}
			}
		}
	}

	.wp-block-navigation__submenu-icon {
		height: 1rem;
		width: 1rem;

		&[aria-expanded='true'] {
			transform: rotate(-180deg);
		}
	}
}

.wp-block-navigation__responsive-container {

	&.is-menu-open {

		.wp-block-navigation__responsive-container-content {

			.wp-block-navigation-item,
			.wp-block-navigation__container,
			.wp-block-page-list {
				align-items: flex-start;
				gap: 0.625rem;
				width: 100%;
			}

			.wp-block-navigation-item__content {
				display: block;
				padding: 0;
				width: 100%;

				&:hover::before,
				&:hover::after {
					height: 3px;
				}
			}

			.has-child {

				.wp-block-navigation__submenu-container {
					box-shadow: none;
					min-width: 100%;
					padding: 0;
					width: 100%;

					.wp-block-navigation-item__content {
						color: var(--wp--preset--color--black);

						&:hover::before,
						&:hover::after {
							height: 3px;
						}

						&:hover,
						&:focus {
							.wp-block-navigation-item__label {
								color: var(--wp--preset--color--black);
							}
						}
					}
				}
			}
		}
	}
}


/* Mobile only menu */
@include responsive-max(833px) {
	.wp-block-navigation__container.is-responsive {
		width: 100%;
	}
}


@include responsive-min(834px) {
	.wp-block-navigation__responsive-container-open:not(.always-shown) {
		display: none !important; /* stylelint-disable-line declaration-no-important */
	}
	.wp-block-navigation__responsive-container:not(.hidden-by-default) {
		&:not(.is-menu-open) {
			display: block !important; /* stylelint-disable-line declaration-no-important */
		}
	}
}

/* Remove the WordPress default for 600px */
@include responsive-min(600px) {
	.wp-block-navigation__responsive-container-open {
		&:not(.always-shown) {
			display: block;
		}
	}

	.wp-block-navigation__responsive-container {
		&:not(.hidden-by-default):not(.is-menu-open) {
			display: none;
		}
	}
}
